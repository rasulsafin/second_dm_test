# Changelog

## [Unreleased]

### Добавлено:

* Динамическое поле "Тип отклонения" в Brio Cloud;
* `API` Возможность прикреплять файлы к проекту;
* Возможность выгружать файлы на облако;
* `CI/CD` Запуск интеграционных тестов;
* Синхронизация иерархии папок;
* `API` Выбор формата отчёта при его создании;
* `Installer` Удаление предыдущей записи из Brio Launcher;
* Фильтрация изображений в отчёте;
* Отчет об bim элементах в задачах;
* `MRS-7165` Оглавление в отчетах;
* `MRS-7334` Фильтрация по динамическим полям и модели, к которой принадлежат бим элементы в задаче;

### Изменено:

* Шаблон отчёта;
* `API` Создание отчёта;
* `CI/CD` Версия приложения вычисляется с помощью MinVer;
* Новые файлы в Brio Cloud влияют на синхронизацию проектов;   
* `Files` Файл проекта в облачных хранилищах не хранит файлы проекта;
* Формат путей, хранящихся в базе данных и на облаке;
* Расположение медиа файлов зависит от их местоположения на облаке;
* `CI/CD` Правила сборки установщика;
* `API` `MRSK-154` Возвращаются все задачи с привязкой к месту, если параметр Ifc модели пустой;
* `MRSK-169` Обновлена информация об организации в отчете;

### Устарело:
### Удалено:

* Подключение к BIM 360;
* Подключение к TDMS Kosmos;
* Подключение к MRS Pro;
* Подключение к Lement Pro;

### Исправлено:

* Скачивание файлов с Brio Cloud;
* Критические ошибки при синхронизации;
* Ошибка синхронизации с Brio Cloud, если отсутствуют системные папки на облаке;
* При отсутствии шаблонов для генерации отчёта клиенту возвращается ошибка;
* Синхронизация, если удалена задача с подзадачами;
* Синхронизация прикрепленной к удалённой модели задачи; 

### Безопасность:


## [1.3.1] - 2022-11-28

### Добавлено:

* Установщик документооборота;
* Удаление виртуальных файлов в облачных хранилищах;
* Упоминания в комментариях BIM 360;
* Удаление виртуальных файлов в BIM 360;
* Вывод сообщения об ошибке и завершение работы при некорректном старте.

### Изменено:

* Тип исключений в ответах от долгих запросов.

### Исправлено:

* Синхронизация задач, созданных другим пользователем;
* Определение автора задачи в Brio Cloud;
* Синхронизация проектов с двух аккаунтов BRIO MRS; 
* Скачивание файлов с Brio Cloud;
* Синхронизация проектов с двух аккаунтов BRIO MRS;
* Большое количество запросов на получение пользователей в BIM 360;
* Отображение комментариев с упоминанием в BIM 360;
* Десериализация исключений документооборота;
* Прогресс синхронизации при большом объеме данных.


## [1.3.0] - 2022-07-12

### Добавлено:

* Информация о прикреплённых к задаче элементах модели сохраняется в комментариях BIM 360;
* Информация об оригинальной модели, на которой было создано нарушение, сохраняется в комментариях BIM 360;
* Возможность одновременного закрытия и прикрепления фото при синхронизации с BIM 360;
* Возможность одновременного закрытия и добавления комментария при синхронизации с BIM 360;
* Синхронизация с Brio-Cloud;
* Статус задачи "Закрыт";
* Информация о времени последнего обновления теперь передается вместе с экземпляром задачи;
* Группировка задач в отчете по статусу;
* Множественная фильтрация задач по типу и статусу;
* Возможность запроса информации о дочерних задачах для указанного родителя;
* Сортировка задач;
* Фильтрация задач по дате;
* Возможность запроса информации о задачах по проекту, содержащей только информацию об идентификаторах (ID) и привязанных BIM-элементах задач;
* Генерация отчета в соответствии с локализацией.

### Изменено:

* Issue в BIM 360 создаются с перспективным видом;
* Увеличен размер миникарты;
* Метод удаления задач теперь возвращает список всех удаленных задач;
* Метод получения задач с метками поддерживает фильтрацию;
* Синхронизация файлов в BIM 360 происходит только в папках с файлом-указателем;
* Файл для BIM 360, указывающий на папку для загрузки файлов, переименован;
* Сокращено количество запросов при подключении к BIM 360.

### Исправлено:

* Нарушения в BIM 360, к которым были прикреплены файлы, учитываются при синхронизации;
* Синхронизация откреплённых от задачи файлов;
* Обновление значений перечислений при переподключении;
* Синхронизация с BIM 360, если файлы, прикрепленные к нарушению, были добавлены без загрузки в папку;
* Синхронизация с облачными хранилищами, если файл проекта удален, а файлы задач остались;
* Удаление проекта в облачных хранилищах не удаляет задачи.


## [1.2.1] - 2021-12-30

### Изменено:

* Интерфейс IConnectionMeta определяет метод получения действий для внедрения в контейнер зависимостей стороннего подключения;
* Интерфейс IConnectionMeta определяет метод получения списка свойств, которые необходимо игнорировать в логировании.

### Изменено:

* Запуск приложения из другой директории останавливает остальные запущенные экземпляры.

### Исправлено:

* Удаление задач из BIM 360;


## [1.2.0] - 2021-11-26

### Добавлено:

* Возможность конфигурации статусов BIM 360;
* Динамическое поле Status для созданных нарушений в BIM 360;
* Фильтрация списка задач по статусу;
* Возможность получения отдельного списка задач с местоположением;
* Поле "Статус" в отчетах;
* API для работы с бим элементами.

### Изменено:

* Проект переименован в Brio.Docs;
* Пространства имён изменены;
* Работа с координатами переведена на собственный тип Vector3d точности double.

### Исправлено:

* Получение нарушений из BIM 360 при недоступном связанном документе.


## [1.1.1] - 2021-10-29

### Добавлено:

* Пагинация для запроса списка задач;
* Фильтрация списка задач;
* Возможность в BIM 360 перенаправлять нарушения на другую модель при помощи конфигурационного файла .mrsbc;
* Динамическое поле ответственного за нарушение в BIM 360;
* Поле "Название" в отчетах;
* Динамическое поле для комментария в BIM 360;
* Динамическое поле Location в BIM 360.

### Исправлено:

* Дублирование новых динамических полей;
* Фото, прикреплённые к нарушениям BIM 360, видны в разделе "Photo";
* Синхронизация при прикреплении нового файла к проекту;
* Синхронизация с облачными сервисами;
* Логирование синхронизации;
* Загрузка в Яндекс Диск прикреплённых к задаче файлов осуществляется в папку файлов проекта;
* Создание папок в Яндекс Диске.


## [1.1.0] - 2021-09-30

### Добавлено:

* Новые типы исключений;
* Динамическое поле причины в BIM 360;
* Динамическое поле описания местоположения в BIM 360;
* Динамическое поле ответа в BIM 360.

### Изменено:

* Обработка ошибок документооборота.

### Удалено:

* Использование Id в папках проектов.

### Исправлено:

* Пользователь учитывается при выборе вариантов динамического поля;
* Получение прикреплённых файлов BIM 360.


## [1.0.4] - 2021-08-20

### Добавлено:

* Удаление временной отметки синхронизации;
* Получение временных отметок синхронизации.

### Исправлено:

* Размер файлов при получении и конвертации;
* Создание значений перечислений.


## [1.0.3] - 2021-07-30

### Добавлено:

* Синхронизация с MRSPro;
* Синхронизация с pushpin issue в BIM 360;
* Возможность выбора папки для загрузки файлов в BIM 360;
* Нарушение в BIM 360 привязывается к модели, если задача была создана для её элемента.

### Исправлено:

* Неправильное присвоение автора, если внешний id автора пустой;
* Отсутствие фильтрации списка объектов, передаваемых для синхронизации;
* Скачивание файлов из BIM 360;
* Синхронизация файлов, вложенных в папки в BIM 360;
* Названия папок проектов формируются по новым правилам;
* Названия папок по новым правилам при синхронизации.

## [1.0.2] - 2021-06-11

### Изменено:

* Конфигурация IIS.


## [1.0.1] - 2021-05-07

### Добавлено:

* Создание отчетов в отдельную папку; 
* Обработка ошибок и их преобразование в соответствующие коды состояния;
* Логирование сервисов;
* Меню и статус документооборота в трее windows;
* Местоположение задачи;
* Логирование работы с Lement Pro.

### Изменено:

* Информация о подключении приходит вместе с данными пользователя.

### Исправлено:

* Работоспособность тестов.


## [1.0.0] - 2021-04-23

### Добавлено:

* Функционал для синхронизации с внешним документооборотом;
* Синхронизация с Lement Pro;
* Синхронизация с Bim 360;
* Синхронизация с TDMS;
* Стандартные динамические поля для определенных типов задач;
* Возможность обработки долгих запросов с поддержкой прогресса;
* Логирование.

### Изменено:

* Подтягивание файлов проектов из сторонних документооборотов.

### Исправлено:

* Баг с потерей прикрепленных ранее файлов при изменении Objective.


## [0.8.1] - 2021-03-10

### Добавлено:

* Синхронизация с Яндекс Диском;
* Синхронизация с Google Drive.

### Изменено:

* Генерация отчётов по задачам;
* Привязка ifc элементов к задачам.


## [0.8.0] - 2021-02-15

### Добавлено:

* Работа с БД;
* Web API;
* Поддержка типов перечислений для внешних документооборотов.

### Удалено:

* Синхронизация с TDMS;
* Синхронизация с Яндекс Диском;
* Синхронизация с Google Drive.


## [0.7.0] - 2021-02-01

### Добавлено:

* Синхронизация с Google Drive;
* Возможность получать файлы Navisworks со списком BIM моделей.


## [0.6.0] - 2020-12-09

### Добавлено:

* Генерация отчётов по нарушениям.

### Удалено:

* Синхронизация с Google Drive;
* Синхронизация с Bim 360.

[Unreleased]: http://gitlab.briogroup.ru/mrs/unity/document-management/activity
[1.3.1]: https://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.3.1
[1.3.0]: https://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.3.0
[1.2.1]: http://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.2.1
[1.2.0]: http://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.2.0
[1.1.1]: http://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.1.1
[1.1.0]: http://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.1.0
[1.0.4]: http://gitlab.briogroup.ru/mrs/unity/document-management/-/releases/1.0.4
[1.0.3]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/1.0.3
[1.0.2]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/1.0.2
[1.0.1]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/1.0.1
[1.0.0]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/1.0.0
[0.8.1]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/0.8.1
[0.8.0]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/0.8.0
[0.7.0]: http://mrs-it-services.nur.briogroup.ru:6080/mrs/unity/document-management/-/releases/0.7.0
[0.6.0]: http://virta.briogroup.ru:3000/mrs/view/releases/tag/0.6.0
